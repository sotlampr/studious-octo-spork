<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="description" content="">
  <meta name="author" content="">

  <title>studious-octo-spork</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
</head>

<template name="App_body">
  <nav class="navbar navbar-default navbar-inverse navbar-fixed-top">
    <div class="container">
    	<div class="navbar-header">
      	<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        	<span class="sr-only">Toggle navigation</span>
        	<span class="icon-bar"></span>
        	<span class="icon-bar"></span>
        	<span class="icon-bar"></span>
      	</button>
        <a class="navbar-brand" href="{{#if currentUser}}/dashboard{{else}}/{{/if}}">Studious Octo Spork</a>
      </div>
      <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href='/'>Home</a></li>
          <li><a href="/about">About</a></li>
          <li><a href="/users">Users</a></li>
          <li><a href="/dashboard">Dashboard</a></li>
          <li><a href="/contact">Contact</a></li>
        </ul>
        {{#if currentUser}}
          <div class="nav navbar-right dropdown">
            <button class="btn btn-info dropdown-toggle" type="button" data-toggle="dropdown">{{currentUser.username}}<span class="caret"></span></button>
            <ul class="dropdown-menu">
              <li><a href="">Signed in as <strong>{{currentUser.username}}</strong></a></li>
              <li class="divider"></li>
              <li><a href="">Your profile</a></li>
              <li><a href="">Help</a></li>
              <li class="divider"></li>
              <li><a href="">Settings</a></li>
              <li><a class="signout">Sign out</a></li>
            </ul>
          </div>
        {{else}}
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/register"><span class="glyphicon glyphicon-user"></span> Sing Up</a></li>
            <li><a href="/register"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
          </ul>
        {{/if}}
      </div>
    </div>
  </nav>
  <br>

  {{> Template.dynamic template=main}}

  <footer>
    <p class='text-center'>2016 by <strong>&gt;touch_code</strong></p>
  </footer>
</template>

<template name="hello">
  <div class="jumbotron">
    <div class="container-fluid bg-1 text-center">
      <h2>Welcome to Time Ride!</h2>
      <img src="bike.jpg" class="img-circle" alt="Bike" width='300' height='300'>
      <h3>A bank time</h3>
      <p>
        <a class="btn btn-primary btn-lg" href="/about" role="button">Learn more »</a>
      </p>
    </div>
  </div>
  <div class="container">
    <p>
      {{> loginButtons}}
    </p>
  </div>
  <div class="container">
    <!-- Example row of columns -->
    <div class="row">
      <div class="col-md-4">
        <h2>Heading</h2>
        <p>
          Donec id elit non mi porta gravida at eget metus.
          Fusce dapibus, tellus ac cursus commodo,
          tortor mauris condimentum nibh,
          ut fermentum massa justo sit amet risus.
          Etiam porta sem malesuada magna mollis euismod.
          Donec sed odio dui.
        </p>
        <p><a class="btn btn-default" href="#" role="button">View details »</a></p>
      </div>
      <div class="col-md-4">
        <h2>Heading</h2>
        <p>
          Donec id elit non mi porta gravida at eget metus.
          Fusce dapibus, tellus ac cursus commodo,
          tortor mauris condimentum nibh,
          ut fermentum massa justo sit amet risus.
          Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
        </p>
        <p><a class="btn btn-default" href="#" role="button">View details »</a></p>
        </div>
        <div class="col-md-4">
          <h2>Heading</h2>
          <p>
            Donec sed odio dui. Cras justo odio,
            dapibus ac facilisis in, egestas eget quam.
            Vestibulum id ligula porta felis euismod semper.
            Fusce dapibus, tellus ac cursus commodo,
            tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.
          </p>
          <p><a class="btn btn-default" href="#" role="button">View details »</a></p>
        </div>
      </div>
      <hr>
  </div>
</template>

<template name="about">
  <br>
  <div class="container-fluid">
    <h2>About Time Ride</h2>
    <h3>What is a Time Bank?</h3>
    <p>
       Time Banks have been established in 34 countries, with at least 300
      Time Banks established in 40 US states and 300 throughout the United Kingdom.
      Time Banks also have a significant presence in Japan, South Korea, New Zealand, Taiwan,
      Senegal, Argentina, Israel, Greece, and Spain. Time Banks have been used to
      reduce recidivism rates with diversionary programs for first-time juvenile offenders;
      facilitate re-entry of for ex-convicts; deliver health care, job
      training and social services in public housing complexes; facilitate substance abuse recovery;
      prevent institutionalization of severely disabled children through parental support networks;
      provide transportation for homebound seniors in rural areas; deliver elder care,
      community health services and hospice care; and foster women's rights initiatives in Senegal.
    </p>
    <h3>What is timing banking?</h3>
    <p>
       Time banking is a pattern of reciprocal service exchange that uses units of time as currency.
      It is an example of a complementary monetary system.
      A time bank, also known as a service exchange, is a community that practices time banking.
      The unit of currency, always valued at an hour's worth of any person's labor,
      used by these groups has various names, but is generally known as a time dollar in the USA and a time credit in the UK.
      Time banking is primarily used to provide incentives
      and rewards for work such as mentoring children, caring for the elderly,
      being neighborly—work usually done on a volunteer basis—which a pure market system devalues.
      Essentially, the "time" one spends providing these types of community services earns "time" that one can spend to receive services.
      As well as gaining credits, participating individuals,
      particularly those more used to being recipients in other parts of their lives,
      can potentially gain confidence, social contact and skills through giving to others.
      Communities therefore use time banking as a tool to forge stronger intra-community connections,
      a process known as "building social capital". Time banking had its intellectual genesis in the USA in the early 1980s.
      By 1990, the Robert Wood Johnson Foundation had invested USD 1.2 million to pilot time banking in the context of senior care.
      Today, 26 countries have active Time Banks. There are 250 Time Banks active in the UK and over 276 Time Banks in the U.S.
    </p>
    <h3>Philosophy</h3>
    <p>
       Time Banking is a community development tool and works by facilitating the exchange
      of skills and experience within a community. It aims to build the 'core economy' of family
      and community by valuing and rewarding the work done in it. The world's first time bank was
      started in Japan by Teruko Mizushima in 1973 with the idea that participants could earn time
      credits which they could spend any time during their lives. She based her bank on the simple
      concept that each hour of time given as services to others could earn reciprocal hours of
      services for the giver at some stage in the future, particularly in old age when they might
      need it most. In the 1940s, Mizushima had already foreseen the emerging problems of an ageing
      society such as seen today. In the 1990s the movement took off in the USA, with Dr Edgar Cahn
      pioneering it there, and in the United Kingdom, with Martin Simon from Timebanking UK.
    </p>
    <p>
      According to Edgar S. Cahn, time banking had its roots in a time when "money for social programs
      [had] dried up" and no dominant approach to social service in the U.S. was coming up with
      creative ways to solve the problem. He would later write that "Americans face at least three
      interlocking sets of problems: growing inequality in access by those at the bottom to the most
      basic goods and services; increasing social problems stemming from the need to rebuild family,
      neighborhood and community; and a growing disillusion with public programs designed to address
      these problems" and that "the crisis in support for efforts to address social problems stems
      directly from the failure of . . . piecemeal efforts to rebuild genuine community." In
      particular Cahn focused on the top-down attitude prevalent in social services. He believed that
      one of the major failings of many social service organizations was their unwillingness to enroll
      the help of those people they were trying to help. He called this a deficit based approach
      to social service, where organizations view the people they were trying to help only in terms of
      their needs, as opposed to an asset based approach, which focuses on the contributions towards
      their communities that everyone can make. He theorized that a system like time banking could
      "[rebuild] the infrastructure of trust and caring that can strengthen families and communities."
      He hoped that the system "would enable individuals and communities to become more self-sufficient,
      to insulate themselves from the vagaries of politics and to tap the capacity of individuals who were
      in effect being relegated to the scrap heap and dismissed as freeloaders."
    </p>
    <p>
      As a philosophy, time banking, also known as Time Trade is founded upon five principles,
      known as Time Banking's Core Values:
    </p>
    <ul>
      <li>Everyone is an asset</li>
      <li>Some work is beyond a monetary price</li>
      <li>Reciprocity in helping</li>
      <li>Social networks are necessary</li>
      <li>A respect for all human beings</li>
    </ul>
    <p>
      Ideally, time banking builds community. Time Bank members sometimes refer to this as a return to
      simpler times when the community was there for its individuals. An interview at a time bank in the
      Gorbals neighbourhood of Glasgow revealed the following sentiment:
    </p>
    <p>
      <div class='col-sm-offset-3 col-sm-6'>
        [the time bank] involves everybody coming together as a community . . . the Gorbals has never — not
        for a long time — had a lot of community spirit. Way back, years ago, it had a lot of community
        spirit, but now you see that in some areas, people won't even go to the chap next door for a some
        sugar . . . that's what I think the project's doing, trying to bring that back, that community
        sense . . .
      </div>
    </p>
    <div class='col-sm-6'>
      <p>For more informations <a href="https://en.wikipedia.org/wiki/Time_banking">here</a></p>
    </div>
  </div>
</template>

<template name="contact">
  <div class="jumbotron">
    <form role="form" id="cntct" class="container-fluid testemail">
      <h3 class="text-center">Contact us and we'll get back to you within 24 hours.</h3>
      <br>
      <div class="row">
        <div class="col-md-4">
          <p><span class="glyphicon glyphicon-map-marker"></span>Athens, GR</p>
          <p><span class="glyphicon glyphicon-phone"></span>Phone: +30 6912345678</p>
          <p><span class="glyphicon glyphicon-envelope"></span>Email: mail@mail.com</p>
        </div>
        <div class="col-md-8">
          <div class="row">
            <div class="col-sm-6 form-group">
              <input class="form-control" id="name" name="name" placeholder="Name" type="text" required>
            </div>
            <div class="col-sm-6 form-group">
              <input class="form-control" id="email" name="email" placeholder="Email" type="text" required>
            </div>
            <textarea class="form-control" id="comments" name="comments" placeholder="Comment" rows="5"></textarea><br>
            <div class="row">
              <div class="col-sm-12 form-group">
                <button class="btn btn-default pull-right" type="submit">Send</button>
              </div>
            </div>
          </div>
          <p class='thnx'></p>
        </div>
      </div>
    </form>
  </div>
  <script type='text/javascript'>
    $(document).ready( function() {
      $( 'form' ).submit( function() {
        var noempty = true;
        if ( this.name.value == null || this.name.value == "" ) {
          noempty = false;
        }
        if ( this.email.value == null || this.email.value == "" ) {
          noempty = false;
        }
        if ( this.comments.value == null || this.comments.value == "" ) {
          noempty = false;
        }
        if ( !noempty ) {
          alert("There is empty input");
          return noempty;
        }
        $( '.thnx' ).html( '<strong>Your comment has been received, Thank you!</strong>' ).show().fadeOut( 10000 );
      });
    });
  </script>
</template>

<template name="register">
  <div class="jumbotron">
    <div class="container-fluid">
      <p>
        <p>This is a 'register' page.</p>
        {{> loginButtons}}
      </p>
    </div>
  </div>
</template>

<template name="autocomplete">
  {{profile.occupation}}
</template>

<template name="dashboard">
  <div class="jumbotron">
    <div class="container-fluid">
      {{#if formData}}
        {{#with formData}}
          <form role="form" class="form-horizontal update-profile" method="post">
            <div class="form-group">
              <label for="username" class="control-label col-sm-1">Username: </label>
              <div class="col-sm-2">
                <input type="text" class="form-control" id="username" name="username" value={{username}}>
              </div>
            </div>
            <div class="form-group">
              <label for="occupation" class="control-label col-sm-1">Occupation: </label>
              <div class="col-sm-2">
                {{>inputAutocomplete settings=settings id='occupation' class='form-control' name='occupation' value=occupation }}
              </div>
            </div>
            <div class="form-group">
              <label for="description" class="control-label col-sm-1">Description: </label>
              <div class="col-sm-2">
                <input type="text" class="form-control" id="description" name="description" value={{description}}>
              </div>
            </div>
            <div class="form-group">
              <div class="col-sm-2 col-sm-8">
                <button type="submit" class="btn btn-default">Save</button>
              </div>
            </div>
          </form>
        {{/with}}
      {{else}}
        <p>You are not registered yet.</p>
      {{/if}}
    </div>
  </div>
  {{#if currentUser}}
    <div class="container-fluid">
      <h3>Messages</h3>
      <ul>
        {{#each userMessages}}
          <li>
            {{from}}: {{message}}
            <button class="toggle-read">
              {{#if read}}
                <span class="glyphicon glyphicon-eye-open"></span>
              {{else}}
                <span class="glyphicon glyphicon-eye-close"></span>
              {{/if}}
            </button>
            <button>
              <a href="/users/{{from}}/contact">
                <span class="glyphicon glyphicon-pencil"></span>
              </a>
            </button>
            <button class="delete">
              <span class="glyphicon glyphicon-remove"></span>
            </button>
          </li>
        {{/each}}
      </ul>
    </div>
  {{/if}}
</template>

<template name="usersIndex">
  <div class="jumbotron">
    <div class="container-fluid">
      <h2>Get your job done.<br />In a fair manner.</h2>
    </div>
  </div>
  <div class="container-fluid">
    <p>An overview of all the users.</p>
	  {{# if users}}
		  <ul>
		  {{#each users}}
        <a href="{{path(username)}}">
          <li>{{username}}: {{profile.occupation}}</li>
        </a>
		  {{/each}}
		  </ul>
	  {{/if}}
  </div>
  <div class='container'>
    <div class='col-md-6'>
      <form class='findOccupation'>
        <input class="col-md-6" type='text' name='work' placeholder='Are you looking for an occupation?' />
      </form>
    </div>
    <div class='col-md-6'>
      <form class='findDescription'>
        <input class="col-md-6" type='text' name='description' placeholder='Give me a description!' />
      </form>
    </div>
  </div>
  <div class='container'>
    <div class='col-md-6'>
	    {{#if usersSearchWithOccupation}}
	      <ul>
		      {{#each usersSearchWithOccupation}}
            <a href="{{path(username)}}">
              <li>{{username}}: {{profile.occupation}}</li>
            </a>
          {{/each}}
		    </ul>
      {{/if}}
    </div>
    <div class='col-md-6'>
	    {{#if usersSearchWithDescription}}
		    <ul>
	        {{#each usersSearchWithDescription}}
            <a href="{{path(username)}}">
              <li>{{username}}: {{profile.occupation}}</li>
            </a>
		      {{/each}}
		    </ul>
      {{/if}}
    </div>
  </div>
</template>

<template name="usersByUsername">
  <div class="jumbotron">
    <div class="container-fluid">
      {{#if userData}}
        {{#with userData}}
          <h3>user {{username}}</h3>
          <p>
            {{#if occupation}}
              Occupation: {{occupation}}<br />
            {{else}}
              User has not registered an occupation yet.<br />
            {{/if}}
            {{#if description}}
              {{description}}<br />
            {{/if}}
            <a href="/users/{{targetUsername}}/contact">contact user</a>
          </p>
        {{/with}}
      {{else}}
        <p>User {{targetUsername}} does not exist.</p>
      {{/if}}
    </div>
  </div>
</template>

<template name="usersContactByUsername">
  <div class="jumbotron">
    <div class="container-fluid">
      {{#if currentUser}}
        <form role="form" class="form-horizontal send-message" method="post">
          <div class="form-group">
            <label for="message" class="control-label col-sm-3">
              Your Message for {{targetUsername}}:
            </label>
            <div class="col-sm-4">
              <input type="text" class="form-control" id="message" name="message" value="Hello {{targetUsername}}, ">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-3 col-sm-4">
              <button type="submit" class="btn btn-default">Send</button>
            </div>
          </div>
        </form>
        <p class='received text-center'></p>
      {{else}}
        <h2>Sorry, you need to login to access this page</h2>
      {{/if}}
    </div>
  </div>
  <script type='text/javascript'>
    $(document).ready( function() {
      $( 'form' ).submit( function() {
        var noempty = true;
        if ( this.message.value == null || this.message.value == "" ) {
          noempty = false;
        }
        if ( !noempty ) {
          alert("Your message is empty");
          return noempty;
        }
        $( '.received' ).html( '<strong>Your message has been received</strong>' ).show().fadeOut( 10000 );
      });
    });
  </script>
</template>
