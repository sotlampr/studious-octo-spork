<template name="usersIndex">
  <div class="container">
    <h2>An overview of all the users</h2>
    {{# if users}}
      <ul id='users'>
      {{#each users}}
        <a href="{{path(username)}}">
          <li>{{username}}: {{profile.occupation}}</li>
        </a>
      {{/each}}
      </ul>
    {{/if}}
  </div>
  <div class='container'>
    <div class='col-md-6'>
      <form class='find' id='occupation'>
        <input class="col-md-6" type='text' name='work'
               placeholder='Are you looking for an occupation?' />
      </form>
    </div>
    <div class='col-md-6'>
      <form class='find' id='description'>
        <input class="col-md-6" type='text' name='description'
               placeholder='Give me a description!' />
      </form>
    </div>
  </div>
  <div class='container'>
    <div class='col-md-6 col-md-offset-3'>
      {{#if usersSearch}}
        <ul id='searchResults'>
          {{#each usersSearch}}
            <a href="{{path(username)}}">
              <li>{{username}}: {{profile.occupation}}</li>
            </a>
          {{/each}}
        </ul>
      {{/if}}
    </div>
  </div>
</template>

<template name="usersByUsername">
  <div class="jumbotron">
    <div class="container">
      {{#if userData}}
        {{#with userData}}
        <div class='col-sm-6'>
	  <h3>User <b>{{username}}</b></h3>
          {{#if occupation}}
            <p><b>Occupation:</b> {{occupation}}</p>
          {{else}}
            <p>User has not registered an occupation yet.</p>
          {{/if}}
          {{#if description}}
            <p><i>{{description}}</i></p>
          {{/if}}

	  {{#if userIsNotSelf}}
            <p>
              <a href="/users/{{targetUsername}}/contact">contact user</a>
            </p>
          {{/if}}
        </div>
        {{#if currentUser}}
          <div class='col-sm-6'>
            <div id="calendarUser"></div>
          </div>
        {{/if}}

        <div class="col-sm-6">
                  </div>

        <div class="col-sm-6">
        {{#if userIsNotSelf}}
          <p>Claim a session with {{username}}:</p>
            <form role="form" id="claim-session"
                  class="form-horizontal" method="post">
              <div class="form-group">
                <div class="radio">
                  <label>
                    <input type="radio" name="relationship-type"
                           id="giverValidated">
                    {{username}} worked for me
                  </label>
                </div>
                <div class="radio">
                  <label>
                    <input type="radio" name="relationship-type"
                           id="receiverValidated">
                    I worked for {{username}}
                  </label>
                </div>
              </div>

              <div class="form-group">
                <label for="session-description" class="control-label">
                  Please elaboarate
                </label>
                <input type="text" class="form-control"
                       id="sessionDescription"
                       name="session-description">
              </div>

              <div class="form-group">
                <label for="session-cost" class="control-label col-sm-5">
                  Agreed price:
                </label>
                <div class="col-sm-7">
                  <input type="text" class="form-control"
                         id="sessionCost"
                         name="session-cost">
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-offset-7 col-sm-5">
                  <button type="submit" class="btn btn-default">
                    Submit
                  </button>
                </div>
              </div>
            </form>
          {{/if}}
        </div>

        {{/with}}
      {{else}}
        <p>User {{targetUsername}} does not exist.</p>
      {{/if}}
    </div>
  </div>
</template>


<template name="usersContactByUsername">
  <div class="jumbotron">

    <div class="container-fluid">
      {{#if currentUser}}
        <form role="form" class="form-horizontal send-message" method="post">
          <div class="form-group">
            <label for="message" class="control-label col-sm-3">
              Your Message for {{targetUsername}}:
            </label>
            <div class="col-sm-4">
              <input type="text" class="form-control" id="message"
                     name="message" value="Hello {{targetUsername}}, ">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-3 col-sm-4">
              <button type="submit" class="btn btn-default">Send</button>
            </div>
          </div>
        </form>
        <p class='received text-center'></p>
      {{else}}
        <h2>Sorry, you need to login to access this page</h2>
      {{/if}}
    </div>
  </div>
  <script type='text/javascript'>
    $(document).ready(function () {
      $('form').submit(function () {
        var noempty = true;
        if ( this.message.value == null || this.message.value == "" ) {
          noempty = false;
        }
        if (!noempty) {
          Bert.alert("Your message is empty", 'warning', 'growl-top-right');
          return noempty;
        }
      });
    });
  </script>
</template>

<template name='addEditRequestEventModal'>
  <div class="modal fade" id="add-edit-event-modal" tabindex="-1"
    role="dialog" aria-labelledby="add-edit-event-modal">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"
            aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title"
            id="add-edit-event">{{modalLabel.label}} Event</h4>
				</div>
				<form id="add-edit-event-form">
					<div class="modal-body">
						<div class="form-group">
							<label for="title">Event Title</label>
              <input type="text" name="title" class="form-control"
              value="{{evnt.title}}">
						</div>
						<div class="form-group">
							<div class="row">
								<div class="col-xs-12 col-sm-3">
									<label for="start">Event Starts</label>
                  <input type="text" name="start" class="form-control"
                  value="{{evnt.start}}">
								</div>
								<div class="col-xs-12 col-sm-3">
									<label for="end">Event End</label>
                  <input type="text" name="end" class="form-control"
                  value="{{#if evnt.end}}{{evnt.end}}{{else}}{{evnt.start}}{{/if}}">
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						{{#if modalType 'edit'}}
              <button class="btn btn-danger pull-left delete-event">
                Delete Event
              </button>
						{{/if}}
            <button type="button" class="btn btn-default"
              data-dismiss="modal">
              Cancel
            </button>
            <button type="submit"
              class="btn btn-success">{{modalLabel.button}} Event</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</template>
